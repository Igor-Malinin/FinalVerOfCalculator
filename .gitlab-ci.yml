image: node:latest
default: 
  tags: [worker2]

stages:
  - build

build_image:
  stage: build
  script:
    - npm install
    - npm install -g @angular/cli
    - npm i @angular-devkit/build-angular --force
    - npm run build --source-map=false
    - ls
  artifacts:
    paths:
      - $CI_PROJECT_DIR/dist
  cache:
    key:
      files:
        - package-lock.json
    paths:
      - node_modules
    policy: pull
  when: always



# image: node:alpine
# default: 
#   tags: [worker01]


# stages:
#   - build
# #  - test
#  # - deploy

# before_script:
#   - npm install

# build-min-code:
#   stage: build
#   script:
#     - npm install

#run-unit-test:
#  stage: test
#  script:
#    - npm run test#

#deploy-staging:
#  stage: deploy
#  script:
#    - npm run deploy-stage
#  only:
#    - develop#

#deploy-production:
#  stage: deploy
#  script:
#    - npm run deploy-prod
#  only:
#    - master
